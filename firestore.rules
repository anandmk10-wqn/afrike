rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Shipments collection
    match /shipments/{shipmentId} {
      // Allow public read access for shipment tracking.
      allow read: if true;

      // Allow write access (create, update, delete) only to authenticated admins
      // from your specified Google Workspace domains.
      allow write: if request.auth != null &&
                      (request.auth.token.email.matches('.*@grrgl\\.com$') ||
                       request.auth.token.email.matches('.*@mil-serve\\.com$'));
    }
  }
}
